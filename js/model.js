async function sendMessage(){const e=document.getElementById("user-input").value,t=document.getElementById("chat-box"),n=document.getElementById("model-select").value;if(!e.trim())return void alert("请输入内容");const s=marked.parse(e);t.innerHTML+=`<div class="user"><strong>你:</strong> ${s}</div>`,document.getElementById("user-input").value="",t.innerHTML+='<div class="loading"><strong>大模型:</strong> 正在思考中...</div>';const o=t.lastElementChild,r={method:"POST",headers:{Authorization:modelkey,"Content-Type":"application/json"},body:JSON.stringify({model:n,messages:[{role:"user",content:e}],stream:!1,max_tokens:512,stop:["null"],temperature:.7,top_p:.7,top_k:50,frequency_penalty:.5,n:1,response_format:{type:"text"},tools:[{type:"function",function:{description:"<string>",name:"<string>",parameters:{},strict:!1}}]})};try{const e=await fetch(modelapi,r),n=await e.json();o.remove();const s=marked.parse(n.choices[0].message.content);t.innerHTML+=`<div class="assistant"><strong>大模型:</strong> ${s}</div>`,t.scrollTop=t.scrollHeight}catch(e){o.remove(),t.innerHTML+='<div class="assistant"><strong>错误:</strong> 无法获取大模型的回复</div>'}}window.onload=function(){document.getElementById("chat-box").innerHTML+=`<div class="assistant"><strong>大模型:</strong> ${marked.parse("欢迎使用聊天对话系统！你可以在这里提出任何问题，我会尽力帮助你。")}</div>`};